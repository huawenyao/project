# 交互设计模板 (Interaction Design Template)

**Feature**: [功能名称]

**Version**: 1.0
**Date**: [日期]
**Designer**: [设计师姓名]
**Status**: 🎨 Draft / 🔍 Review / ✅ Approved

---

## 设计概览 (Design Overview)

### 设计目标

**核心交互目标**:
- [ ] 让用户能快速完成 [核心任务]
- [ ] 降低认知负担，简化操作流程
- [ ] 提供清晰的反馈和引导

**设计原则**:
1. **简洁性** (Simplicity): 少即是多，专注核心功能
2. **一致性** (Consistency): 遵循设计系统，保持体验统一
3. **可发现性** (Discoverability): 功能易于发现和理解
4. **反馈性** (Feedback): 即时响应用户操作
5. **容错性** (Error Tolerance): 防止错误，容易纠正

---

## 交互流程 (Interaction Flow)

### 主流程图

```
[入口点]
    ↓
[首屏加载]
    ↓
[用户触发操作]
    ↓
[系统响应与反馈] ←─┐
    ↓              │
[显示结果]         │
    ↓              │
[后续操作] ────────┘
    ↓
[完成/退出]
```

### 详细交互步骤

#### 步骤 1: 入口与触发

**用户如何发现功能**:
- **主入口**: 从 [位置] 点击 [按钮/链接]
- **次入口**: 通过 [快捷方式/搜索/推荐]
- **深链接**: 从外部 URL 直接进入

**视觉吸引**:
- 使用 [颜色/图标/动画] 吸引注意
- 位置：[具体位置，如：右上角/中心/底部]
- 优先级：P0 (始终可见) / P1 (需要时显示)

**进入动画**:
```css
/* 入场动画示例 */
.feature-entrance {
  animation: slideInUp 0.3s ease-out;
}
```

---

#### 步骤 2: 首屏展示

**首屏内容结构**:

```
┌─────────────────────────────────────┐
│  [标题/Logo]          [操作按钮]    │ ← Header
├─────────────────────────────────────┤
│                                     │
│  [主要内容区]                       │ ← Main Content
│  - 关键信息                          │
│  - CTA 按钮                         │
│                                     │
├─────────────────────────────────────┤
│  [次要信息/帮助链接]                │ ← Footer
└─────────────────────────────────────┘
```

**F 型视觉流**:
1. 用户首先看到：[最重要的信息]
2. 其次注意到：[次要信息]
3. 最后扫视：[辅助信息]

**首屏加载**:
- 加载时间：目标 < 1.5s
- 加载动画：[Spinner / Skeleton / Progressive]
- 懒加载：非关键内容延迟加载

**空状态设计**:
- 无数据时显示：[插图 + 引导文案]
- CTA 按钮：[创建第一个项目]
- 示例数据：提供 Demo 数据供探索

---

#### 步骤 3: 用户输入与操作

**输入方式**:
- ⌨️ 键盘输入：[文本框/下拉框/选择器]
- 🖱️ 鼠标操作：[点击/拖拽/悬停]
- 👆 触摸手势：[点击/滑动/长按/捏合]
- 🎤 语音输入：[语音转文字]

**表单设计**:

##### 字段类型和验证

| 字段 | 类型 | 必填 | 验证规则 | 错误提示 |
|------|------|------|----------|----------|
| 用户名 | Text | ✅ | 3-20 字符，字母开头 | "用户名需要 3-20 个字符" |
| 邮箱 | Email | ✅ | 标准邮箱格式 | "请输入有效的邮箱地址" |
| 密码 | Password | ✅ | 最少 8 位，含大小写+数字 | "密码需要至少 8 位，包含..." |

##### 表单布局

```
┌─────────────────────────┐
│ 标签                    │
│ [输入框____________]    │ ← 上下布局，标签在上
│ 提示文字 (灰色小字)     │
└─────────────────────────┘

[标签]  [输入框______]      ← 左右布局，适合短表单
```

##### 实时验证

- **输入时**: 不打断用户，静默验证
- **失焦时**: 显示验证结果（✓ / ✗）
- **提交时**: 统一显示所有错误

**验证反馈示例**:
```
✓ 用户名可用          (成功 - 绿色)
✗ 邮箱格式不正确      (错误 - 红色)
⚠ 密码强度：弱        (警告 - 黄色)
```

---

##### 按钮设计

**按钮层级**:
1. **主按钮** (Primary): [保存/提交/创建] - 蓝色，实心
2. **次按钮** (Secondary): [取消/返回] - 灰色，空心
3. **危险按钮** (Danger): [删除/移除] - 红色，实心
4. **文本按钮** (Text): [了解更多] - 无背景，仅文字

**按钮状态**:
- **默认** (Default): 正常状态
- **悬停** (Hover): 颜色加深，鼠标变手型
- **按下** (Active): 轻微缩小，模拟物理按压
- **禁用** (Disabled): 灰色，不可点击，鼠标为默认箭头
- **加载** (Loading): 显示 Spinner，文字变为"处理中..."

**按钮交互**:
```css
.btn-primary {
  background: #1E40AF;
  transition: all 0.2s ease;
}

.btn-primary:hover {
  background: #1E3A8A;
  transform: translateY(-1px);
  box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}

.btn-primary:active {
  transform: translateY(0);
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.btn-primary:disabled {
  background: #9CA3AF;
  cursor: not-allowed;
  opacity: 0.6;
}
```

---

#### 步骤 4: 系统响应与反馈

**反馈层级**:

1. **微交互** (< 100ms): 按钮点击效果，无需显示加载
2. **快速响应** (100ms - 1s): 显示 Inline Loading
3. **中等等待** (1s - 5s): 全局 Loading + 进度条
4. **长时等待** (> 5s): 进度条 + 预估时间 + 可中断

**Loading 状态设计**:

##### Inline Loading (行内加载)
```
[Button Text] → [⏳ 处理中...] → [✓ 已完成]
```

##### Skeleton Screen (骨架屏)
```
┌─────────────────────┐
│ ▓▓▓▓▓▓▓▓            │ ← 灰色矩形模拟内容
│ ▓▓▓▓▓ ▓▓▓▓▓         │
│ ▓▓▓▓▓▓▓▓▓▓          │
└─────────────────────┘
```

##### Progress Bar (进度条)
```
[████████░░░░░░░░] 45%
正在生成报告... 预计还需 30 秒
[取消]
```

**成功反馈**:
- ✅ Toast 通知：绿色，2-3 秒自动消失
- ✨ 动画效果：Confetti / 打勾动画
- 🔊 声音反馈（可选）：轻微提示音

**错误反馈**:
- ❌ 错误提示：红色，需用户手动关闭
- 🔴 错误位置：标红相关字段
- 💡 解决建议：提供具体的修复指引

---

#### 步骤 5: 结果展示

**数据展示方式**:

##### 列表 (List)
- 适合：顺序信息，多项浏览
- 操作：滚动查看，点击进入详情
- 增强：虚拟滚动（大数据量）

##### 卡片 (Card)
- 适合：结构化信息，快速扫视
- 布局：网格排列，响应式调整
- 操作：Hover 高亮，点击交互

##### 表格 (Table)
- 适合：对比分析，数据密集
- 功能：排序、筛选、分页
- 交互：可编辑单元格，行选择

##### 图表 (Chart)
- 适合：趋势分析，数据可视化
- 类型：折线图/柱状图/饼图/热力图
- 交互：Hover 显示详情，点击钻取

**分页设计**:
```
[< 上一页]  1  [2]  3  4  5  ...  10  [下一页 >]
           └── 当前页高亮

或者：

加载了 50 条结果，共 500 条
[加载更多]  ← 无限滚动
```

---

#### 步骤 6: 后续操作

**操作入口**:
- **直接操作**: [编辑/删除/分享] 按钮
- **更多菜单**: [...] 三个点，展开次要操作
- **右键菜单**: 右键触发上下文菜单
- **快捷键**: Ctrl+S 保存，Ctrl+Z 撤销

**确认机制**:
- **低风险操作**: 直接执行，可撤销
- **中风险操作**: Toast 确认，3 秒内可撤销
- **高风险操作**: Modal 二次确认

**确认弹窗设计**:
```
┌─────────────────────────┐
│  ⚠️  确认删除？         │
│                         │
│  此操作不可恢复，确定   │
│  要删除"项目 A"吗？     │
│                         │
│  [取消]    [确定删除]   │
└─────────────────────────┘
```

---

## 响应式设计 (Responsive Design)

### 断点定义

| 设备 | 屏幕宽度 | 布局调整 |
|------|----------|----------|
| 手机 (Mobile) | < 640px | 单列，堆叠布局 |
| 平板 (Tablet) | 640px - 1024px | 两列，侧边栏可折叠 |
| 桌面 (Desktop) | > 1024px | 多列，完整功能 |
| 大屏 (Large) | > 1440px | 最大宽度限制，居中 |

### 移动端优化

**触摸友好**:
- 按钮最小尺寸：44 x 44 px (Apple HIG)
- 间距：至少 8px，避免误触
- 手势支持：滑动返回，下拉刷新

**导航模式**:
- **标签栏** (Tab Bar): 底部固定，3-5 个主功能
- **抽屉** (Drawer): 侧边滑出，次要功能
- **汉堡菜单**: 折叠所有功能

**内容优先**:
- 隐藏非必要装饰
- 图片延迟加载
- 字体大小：至少 16px（避免 iOS 自动放大）

---

## 微交互设计 (Micro-interactions)

### 定义

微交互是针对单一任务的小型交互，提供即时反馈，增强用户体验。

### 关键时刻

#### 1. 点赞/收藏

**交互流程**:
```
未点赞 (♡) → [点击] → 动画放大 + 变色 → 已点赞 (❤️)
```

**动画**:
```css
@keyframes heart-beat {
  0% { transform: scale(1); }
  25% { transform: scale(1.3); }
  50% { transform: scale(1.1); }
  100% { transform: scale(1); }
}

.liked {
  animation: heart-beat 0.4s ease;
  color: #EF4444; /* 红色 */
}
```

---

#### 2. 拖拽排序

**交互流程**:
1. **Grab**: 鼠标按下，卡片轻微放大 + 阴影加深
2. **Drag**: 拖动过程中，半透明，其他卡片让位
3. **Drop**: 释放到目标位置，卡片回弹动画

**视觉反馈**:
- 拖拽手柄：⋮⋮ 六个点图标
- 拖动时：`cursor: grabbing`，`opacity: 0.8`
- 目标位置：虚线框预览

---

#### 3. 切换开关

**交互流程**:
```
OFF [○──]  → [点击] → 滑块滑动 → [──●] ON
灰色           动画 0.2s         蓝色
```

**状态颜色**:
- OFF: `#9CA3AF` (灰色)
- ON: `#3B82F6` (蓝色)
- Disabled: `#E5E7EB` (浅灰)

---

#### 4. 下拉刷新

**交互流程**:
1. **下拉**: 显示下拉距离指示器
2. **释放**: 触发刷新，显示 Loading 动画
3. **完成**: 显示成功提示，列表更新

**动画**:
```
↓ 下拉刷新...
↻ 正在刷新...
✓ 刷新完成！
```

---

#### 5. 输入框焦点

**交互流程**:
```
[默认状态] → [点击] → 边框变蓝 + 阴影 + 标签上移
```

**Floating Label**:
```css
/* 默认：标签在输入框内 */
.input-wrapper {
  position: relative;
}

.input-label {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  transition: all 0.2s;
}

/* 焦点/有内容：标签上移缩小 */
.input:focus + .input-label,
.input:not(:placeholder-shown) + .input-label {
  top: -8px;
  font-size: 12px;
  color: #3B82F6;
}
```

---

## 动画设计 (Animation Design)

### 动画原则

1. **快速** (Fast): 动画时长 100-300ms
2. **自然** (Natural): 使用缓动函数，避免线性
3. **有意义** (Meaningful): 动画服务于交互，非装饰
4. **可中断** (Interruptible): 用户操作可打断动画

### 缓动函数 (Easing)

```css
/* 标准缓动 */
ease-out: 用于进入动画（淡入、滑入）
ease-in: 用于退出动画（淡出、滑出）
ease-in-out: 用于状态变化（展开/收起）

/* 自定义 cubic-bezier */
.custom-ease {
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}
```

### 常用动画模式

#### 淡入淡出 (Fade In/Out)
```css
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.fade-enter {
  animation: fadeIn 0.2s ease-out;
}
```

#### 滑入滑出 (Slide In/Out)
```css
@keyframes slideInUp {
  from {
    transform: translateY(20px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}
```

#### 缩放 (Scale)
```css
@keyframes scaleIn {
  from { transform: scale(0.9); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}
```

#### 加载动画 (Loading)
```css
@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.spinner {
  animation: spin 1s linear infinite;
}
```

### 性能优化

**只动画这些属性**:
- ✅ `transform`: translate, scale, rotate
- ✅ `opacity`
- ❌ 避免：`width`, `height`, `top`, `left` (触发重排)

**使用 GPU 加速**:
```css
.animated {
  will-change: transform, opacity;
  transform: translateZ(0); /* 触发 GPU */
}
```

---

## 可访问性设计 (Accessibility)

### WCAG 2.1 标准

**A 级要求** (必须):
- ✅ 键盘可访问：所有功能可用 Tab + Enter 操作
- ✅ 替代文本：图片提供 `alt` 描述
- ✅ 颜色对比：文字对比度至少 4.5:1

**AA 级要求** (推荐):
- ✅ 颜色对比：大文本 3:1，小文本 4.5:1
- ✅ 可调整文本：支持 200% 缩放不破坏布局
- ✅ 多种感官：不仅依赖颜色传达信息

### 键盘导航

**Tab 顺序**:
1. 主导航
2. 页面内容（从上到下，从左到右）
3. 表单元素
4. 操作按钮

**快捷键**:
| 快捷键 | 操作 |
|--------|------|
| Tab | 下一个元素 |
| Shift+Tab | 上一个元素 |
| Enter | 激活按钮/链接 |
| Space | 选择复选框/单选框 |
| Esc | 关闭弹窗/取消操作 |
| Arrow Keys | 在列表/选项间移动 |

**焦点指示器**:
```css
:focus-visible {
  outline: 2px solid #3B82F6;
  outline-offset: 2px;
}
```

---

### 屏幕阅读器

**ARIA 属性**:
```html
<!-- 按钮 -->
<button aria-label="关闭弹窗">×</button>

<!-- 输入框 -->
<input
  type="text"
  aria-label="搜索"
  aria-describedby="search-hint"
/>
<span id="search-hint">输入关键词搜索</span>

<!-- 加载状态 -->
<div aria-live="polite" aria-busy="true">
  正在加载...
</div>

<!-- 错误提示 -->
<div role="alert" aria-live="assertive">
  表单提交失败，请检查输入
</div>
```

**语义化 HTML**:
```html
<header>...</header>
<nav>...</nav>
<main>
  <article>...</article>
  <aside>...</aside>
</main>
<footer>...</footer>
```

---

### 减弱动画 (Reduced Motion)

尊重用户的动画偏好设置：

```css
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
```

---

## 错误处理 (Error Handling)

### 错误类型

#### 1. 输入错误 (Validation Error)

**场景**: 用户输入不符合要求

**反馈**:
```
[输入框] ← 红色边框
↓
✗ 邮箱格式不正确，请检查后重试
```

**示例**:
- 邮箱格式错误："请输入有效的邮箱地址，例如：user@example.com"
- 密码过短："密码至少需要 8 个字符"
- 必填字段为空："此字段为必填项"

---

#### 2. 系统错误 (System Error)

**场景**: 服务器错误，网络故障

**反馈**:
```
┌─────────────────────────┐
│  😓 出错了               │
│                         │
│  我们的服务器似乎遇到了 │
│  一些问题，请稍后重试。 │
│                         │
│  [重试]    [返回首页]   │
└─────────────────────────┘
```

**错误代码**:
- 500: "服务器错误，我们正在修复"
- 503: "服务暂时不可用，请稍后再试"
- 网络错误: "网络连接失败，请检查网络设置"

---

#### 3. 权限错误 (Permission Error)

**场景**: 用户无权限访问

**反馈**:
```
🔒 没有访问权限

您当前无权查看此内容。
如需访问，请联系管理员。

[返回]
```

---

#### 4. 空状态 (Empty State)

**场景**: 无数据显示

**反馈**:
```
┌─────────────────────────┐
│      📭                 │
│                         │
│   还没有任何内容        │
│   点击下方按钮创建      │
│                         │
│   [创建第一个项目]      │
└─────────────────────────┘
```

---

### 错误预防

**输入约束**:
- 数字输入框：`type="number"`, `min`, `max`
- 日期选择器：限制可选日期范围
- 下拉选择：限制选项，避免自由输入

**实时验证**:
- 边输入边验证（不打断用户）
- 失焦时显示验证结果
- 提交前统一检查

**确认提示**:
- 危险操作二次确认
- 大量数据删除前警告
- 不可逆操作明确说明

---

## 性能感知 (Perceived Performance)

### 让用户感觉更快

#### 1. 乐观更新 (Optimistic UI)

**原理**: 先更新 UI，后台异步提交

**示例**:
```
用户点击"点赞"
  → 立即显示红心 ❤️ (乐观更新)
  → 后台 API 调用
  → 如果失败，回滚到 ♡ + 显示错误
```

---

#### 2. 骨架屏 (Skeleton Screen)

**原理**: 用灰色矩形模拟内容布局

**效果**: 用户感觉内容即将出现，等待更可接受

```
加载前：空白 (感觉慢)
加载中：骨架屏 (感觉快)
加载后：真实内容
```

---

#### 3. 渐进式加载

**原理**: 先显示关键内容，后加载次要内容

**示例**:
1. 先显示文章标题和正文 (快速)
2. 后加载评论区 (延迟)
3. 最后加载侧边栏推荐 (懒加载)

---

#### 4. 预加载 (Preload)

**原理**: 预测用户下一步操作，提前加载

**策略**:
- Hover 链接时预加载页面
- 滚动到底部前预加载下一页
- 鼠标移到菜单时预加载子菜单内容

---

## 设计规范 (Design System)

### 颜色系统

```
主色 (Primary): #3B82F6 (蓝色)
辅助色 (Secondary): #10B981 (绿色)
成功 (Success): #10B981 (绿色)
警告 (Warning): #F59E0B (黄色)
错误 (Error): #EF4444 (红色)
信息 (Info): #3B82F6 (蓝色)

文字颜色:
- 主要文字: #111827 (深灰)
- 次要文字: #6B7280 (中灰)
- 辅助文字: #9CA3AF (浅灰)

背景颜色:
- 主背景: #FFFFFF (白色)
- 次背景: #F9FAFB (浅灰)
- 边框: #E5E7EB (灰色)
```

### 字体系统

```
字体家族:
- 中文: PingFang SC, Microsoft YaHei
- 英文: Inter, -apple-system, BlinkMacSystemFont
- 等宽: SF Mono, Consolas, monospace

字号:
- 12px: 辅助说明
- 14px: 正文
- 16px: 小标题
- 20px: 中标题
- 24px: 大标题
- 32px: 超大标题

行高: 1.5 (正文), 1.2 (标题)
```

### 间距系统

```
4px: 极小间距 (图标与文字)
8px: 小间距 (按钮内边距)
12px: 中间距 (卡片内边距)
16px: 标准间距 (组件间距)
24px: 大间距 (区块间距)
32px: 超大间距 (页面边距)
```

### 圆角系统

```
2px: 小圆角 (标签)
4px: 标准圆角 (按钮、输入框)
8px: 大圆角 (卡片)
12px: 超大圆角 (弹窗)
999px: 完全圆形 (头像、徽章)
```

### 阴影系统

```
.shadow-sm: 0 1px 2px rgba(0,0,0,0.05)
.shadow: 0 1px 3px rgba(0,0,0,0.1)
.shadow-md: 0 4px 6px rgba(0,0,0,0.1)
.shadow-lg: 0 10px 15px rgba(0,0,0,0.1)
.shadow-xl: 0 20px 25px rgba(0,0,0,0.1)
```

---

## 组件库 (Component Library)

### Button 按钮

**变体**:
- Primary: 主要操作
- Secondary: 次要操作
- Outline: 次要操作（空心）
- Text: 辅助操作（纯文字）
- Link: 链接样式

**尺寸**:
- Small: 28px 高
- Medium: 36px 高
- Large: 44px 高

**示例**:
```jsx
<Button variant="primary" size="medium">
  提交
</Button>
```

---

### Input 输入框

**类型**:
- Text: 文本输入
- Number: 数字输入
- Email: 邮箱输入
- Password: 密码输入
- Textarea: 多行文本

**状态**:
- Default: 默认
- Focus: 焦点
- Error: 错误
- Disabled: 禁用

**示例**:
```jsx
<Input
  label="邮箱"
  type="email"
  placeholder="请输入邮箱"
  error="邮箱格式不正确"
  helperText="我们会向此邮箱发送验证码"
/>
```

---

### Modal 弹窗

**尺寸**:
- Small: 400px 宽
- Medium: 600px 宽
- Large: 800px 宽
- Full: 全屏

**结构**:
```
┌─────────────────────────┐
│ [标题]            [×]   │ ← Header
├─────────────────────────┤
│                         │
│  内容区域                │ ← Body
│                         │
├─────────────────────────┤
│  [取消]    [确定]       │ ← Footer
└─────────────────────────┘
```

---

### Toast 提示

**类型**:
- Success: 绿色，✓ 图标
- Error: 红色，✗ 图标
- Warning: 黄色，⚠ 图标
- Info: 蓝色，ℹ 图标

**位置**:
- Top: 顶部居中
- Top-Right: 右上角
- Bottom: 底部居中

**持续时间**: 2-4 秒自动消失

---

## 原型与文档 (Prototypes & Documentation)

### 原型工具

- **低保真**: Balsamiq, Sketch
- **高保真**: Figma, Adobe XD
- **交互原型**: Framer, ProtoPie

### 交付物

- [ ] 页面流程图 (User Flow)
- [ ] 线框图 (Wireframe)
- [ ] 高保真设计稿 (Mockup)
- [ ] 交互原型 (Prototype)
- [ ] 设计规范文档 (Design Spec)
- [ ] 切图/标注 (Assets & Specs)

### 开发协作

**设计标注**:
- 使用 Figma Inspect / Zeplin
- 标注间距、字体、颜色
- 提供切图资源 (SVG/PNG)

**设计走查** (Design Review):
- 开发完成后与设计稿对比
- 检查间距、颜色、字体是否一致
- 测试交互细节和动画效果

---

## 测试清单 (Testing Checklist)

### 功能测试

- [ ] 所有按钮可点击，触发正确操作
- [ ] 表单验证正常，错误提示清晰
- [ ] 数据正确保存和显示
- [ ] 加载状态和错误状态正常

### 交互测试

- [ ] 动画流畅，无卡顿
- [ ] 过渡自然，无突兀变化
- [ ] Hover/Active 状态正常
- [ ] 焦点指示器清晰可见

### 响应式测试

- [ ] 手机 (< 640px) 布局正常
- [ ] 平板 (640-1024px) 布局正常
- [ ] 桌面 (> 1024px) 布局正常
- [ ] 内容缩放到 200% 不破坏布局

### 可访问性测试

- [ ] 键盘可导航所有功能 (Tab)
- [ ] 颜色对比度符合 WCAG AA
- [ ] 图片有 alt 文本
- [ ] 屏幕阅读器可正常朗读

### 性能测试

- [ ] 首屏加载 < 2s
- [ ] 页面交互响应 < 100ms
- [ ] 动画帧率 > 60fps
- [ ] 无内存泄漏

---

## 变更历史 (Change Log)

| 版本 | 日期 | 设计师 | 变更内容 |
|------|------|--------|----------|
| 1.0 | YYYY-MM-DD | [姓名] | 初始版本 |

---

**文档维护**: 本文档由 [设计负责人] 维护，最后更新：YYYY-MM-DD
